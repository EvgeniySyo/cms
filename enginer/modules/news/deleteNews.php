<?phpif (isset($_POST['deleteNews']) && is_numeric($_POST['id'])) {    $SelectType = Simple_DbApi::select_db($_GET['name_tamlates'], 'id,type,name', 'id', $_POST['id'], '', '', 0, 1);    $ni = current($SelectType);    if (file_exists('images/' . $_GET['name_tamlates'] . '/small/' . $_POST['id'] . '.' . $ni['type'])) unlink('images/' . $_GET['name_tamlates'] . '/small/' . $_POST['id'] . '.' . $ni['type']);    Simple_DbApi::delete_db($_GET['name_tamlates'], "id", $_POST['id']);    Simple_DbApi::delete_db($_GET['name_tamlates'] . "_comment", "IdNews", $_POST['id']);    CMS::DeleteSearch($_POST['id']);    CMS::UserEvents('<b>' . $_SESSION["login_admin"] . '</b> удалил новость <b>' . $ni['name'] . '</b> в модуле <b>' . $TitleModule . '</b>. Раздел <a target="_blank" href="main-modules-setting-mod-' . $_GET['name_tamlates'] . '-9.pl"><b>Удалить новости</b></a>');    echo CMS::AlertWindow('Успешно', 'Новость удалена', 1, 0);}$MonthS = array("Январь", "Февраль", "Март", "Апрель", "Май", "Июнь", "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь");echo CMS::AdminModuleSection(24, "", "");if ($_GET['page'] == 9) {    $SelectC = Simple_DbApi::select_db($_GET['name_tamlates'] . "_cat", "*", "", "", "names", 1, "", "");    $list = $ListNews = '';    if (!empty($SelectC)) {        foreach ($SelectC as $i => $nc) {            $list .= CMS::AdminModuleSection(47, "{module},{name},{id}", $_GET['name_tamlates'] . "<><>" . $nc['names'] . "<><>" . $nc['ids']);        }        echo CMS::AdminModuleSection(46, "{listcat}", $list);    }    $SelectN = Simple_DbApi::select_db($_GET['name_tamlates'], "*", "id_cat", 0, "id", 2, 0, $MaxNewsOnPage);    if (!empty($SelectN)) {        $CountNews = Simple_DbApi::CountTable($_GET['name_tamlates'], "id_cat", 0);        foreach ($SelectN as $t => $nn) {            list($YEARR, $MONTHR, $DAYR) = explode("-", $nn['date']);            $MONTH = $MonthS[($MONTHR - 1)];            $dateR = $DAYR . " " . $MONTH . " " . $YEARR . "г.";            $ListNews .= CMS::AdminModuleSection(49, "{name},{data},{module},{id},{window}", $nn['name'] . "<><>" . $dateR . " " . $nn['time'] . "<><>" . $_GET['name_tamlates'] . "<><>" . $nn['id'] . "<><>" . CMS::AlertWindow('Внимание', CMS::AdminModuleSection('49-1', '{id}', $nn['id']), 2, $nn['id']));        }        echo CMS::AdminModuleSection(48, "{list}", $ListNews);        if ($CountNews > $MaxNewsOnPage) {            $maxPage = intval(($CountNews - 1) / $MaxNewsOnPage) + 1;            $MaxGoBack = $maxPage - $MaxListNumber;            if ($pagen > ($maxPage - 1) || $pagen < 0) $pagen = 0;            if (($pagen + 1) <= $MaxListNumber) {                $start = 0;                if ($MaxListNumber > $maxPage) $end = $maxPage;                else $end = $MaxListNumber;            } else {                if ($pagen == ($maxPage - 1) || $pagen > $MaxGoBack) {                    $start = $maxPage - $MaxListNumber;                    $end = $maxPage;                } else {                    $start = $pagen - (round($MaxListNumber / 2));                    $end = $MaxListNumber + $start;                }            }            for ($p = $start; $p < $end; $p++) {                if ($pagen == $p) $ListPage .= CMS::AdminModuleSection('51-1', "{n}", ($p + 1));                else $ListPage .= CMS::AdminModuleSection(51, "{module},{page},{n}", $_GET['name_tamlates'] . "<><>" . $p . "<><>" . ($p + 1));            }            if ($pagen != 0) $backN = CMS::AdminModuleSection('51-2', "{module},{page}", $_GET['name_tamlates'] . "<><>" . ($pagen - 1));            if (($maxPage - 1) != $pagen) $nexN = CMS::AdminModuleSection('51-3', "{module},{page}", $_GET['name_tamlates'] . "<><>" . ($pagen + 1));            echo CMS::AdminModuleSection(53, "{list},{next},{back}", $ListPage . "<><>" . $nexN . "<><>" . $backN);        }    }}if ($_GET['page'] == 10) {    $CountNews = Simple_DbApi::CountTable($_GET['name_tamlates'], "id_cat", 0);    if ($CountNews > 0) {        if (!isset($_GET['id_cat']) || !is_numeric($_GET['id_cat'])) $pagen = 0;        else $pagen = $_GET['id_cat'];        $limit = abs($pagen * $MaxNewsOnPage);        $SelectN = Simple_DbApi::select_db($_GET['name_tamlates'], "*", "id_cat", 0, "id", 2, $limit, $MaxNewsOnPage);        if (!empty($SelectN)) {            foreach ($SelectN as $t => $nn) {                list($YEARR, $MONTHR, $DAYR) = explode("-", $nn['date']);                $MONTH = $MonthS[($MONTHR - 1)];                $dateR = $DAYR . " " . $MONTH . " " . $YEARR . "г.";                $ListNews .= CMS::AdminModuleSection(49, "{name},{data},{module},{id},{window}", $nn['name'] . "<><>" . $dateR . " " . $nn['time'] . "<><>" . $_GET['name_tamlates'] . "<><>" . $nn['id'] . "<><>" . CMS::AlertWindow('Внимание', CMS::AdminModuleSection('49-1', '{id}', $nn['id']), 2, $nn['id']));            }        }        echo CMS::AdminModuleSection(48, "{list}", $ListNews);        if ($CountNews > $MaxNewsOnPage) {            $maxPage = intval(($CountNews - 1) / $MaxNewsOnPage) + 1;            $MaxGoBack = $maxPage - $MaxListNumber;            if ($pagen > ($maxPage - 1) || $pagen < 0) $pagen = 0;            if (($pagen + 1) <= $MaxListNumber) {                $start = 0;                if ($MaxListNumber > $maxPage) $end = $maxPage;                else $end = $MaxListNumber;            } else {                if ($pagen == ($maxPage - 1) || $pagen > $MaxGoBack) {                    $start = $maxPage - $MaxListNumber;                    $end = $maxPage;                } else {                    $start = $pagen - (round($MaxListNumber / 2));                    $end = $MaxListNumber + $start;                }            }            for ($p = $start; $p < $end; $p++) {                if ($pagen == $p) $ListPage .= CMS::AdminModuleSection('51-1', "{n}", ($p + 1));                else $ListPage .= CMS::AdminModuleSection(51, "{module},{page},{n}", $_GET['name_tamlates'] . "<><>" . $p . "<><>" . ($p + 1));            }            if ($pagen != 0) $backN = CMS::AdminModuleSection('51-2', "{module},{page}", $_GET['name_tamlates'] . "<><>" . ($pagen - 1));            if (($maxPage - 1) != $pagen) $nexN = CMS::AdminModuleSection('51-3', "{module},{page}", $_GET['name_tamlates'] . "<><>" . ($pagen + 1));            echo CMS::AdminModuleSection(53, "{list},{next},{back}", $ListPage . "<><>" . $nexN . "<><>" . $backN);        }    }}if ($_GET['page'] == 6) {    if (!isset($_GET['id_cat']) || !is_numeric($_GET['id_cat'])) {        $SelectC = Simple_DbApi::select_db($_GET['name_tamlates'] . "_cat", "*", "", "", "names", 1, "", "");        if (!empty($SelectC)) {            foreach ($SelectC as $i => $nc) {                $list .= CMS::AdminModuleSection(47, "{module},{name},{id}", $_GET['name_tamlates'] . "<><>" . $nc['names'] . "<><>" . $nc['ids']);            }            echo CMS::AdminModuleSection(46, "{listcat}", $list);        } else echo CMS::AdminModuleSection(30, "{module}", $_GET['name_tamlates']);    } else {        if (!isset($_GET['id_news']) || !is_numeric($_GET['id_news'])) $pagen = 0;        else $pagen = $_GET['id_news'];        $limit = abs($pagen * $MaxNewsOnPage);        $SelectC = Simple_DbApi::select_db($_GET['name_tamlates'] . "_cat", "*", "ids", $_GET['id_cat'], "", "", "", "");        if (!empty($SelectC)) {            $nc = current($SelectC);            $CountNews = Simple_DbApi::CountTable($_GET['name_tamlates'], "id_cat", $_GET['id_cat']);            if ($CountNews > 0) {                $SelectN = Simple_DbApi::select_db($_GET['name_tamlates'], "*", "id_cat", $_GET['id_cat'], "id", 2, $limit, $MaxNewsOnPage);                if (!empty($SelectN)) {                    $ListNews = '';                    foreach ($SelectN as $t => $nn) {                        list($YEARR, $MONTHR, $DAYR) = explode("-", $nn['date']);                        $MONTH = $MonthS[($MONTHR - 1)];                        $dateR = $DAYR . " " . $MONTH . " " . $YEARR . "г.";                        $ListNews .= CMS::AdminModuleSection(49, "{name},{data},{module},{id},{window}", $nn['name'] . "<><>" . $dateR . " " . $nn['time'] . "<><>" . $_GET['name_tamlates'] . "<><>" . $nn['id'] . "<><>" . CMS::AlertWindow('Внимание', CMS::AdminModuleSection('49-1', '{id}', $nn['id']), 2, $nn['id']));                    }                }                echo CMS::AdminModuleSection(56, "{list},{name}", $ListNews . "<><>" . $nc['names']);                if ($CountNews > $MaxNewsOnPage) {                    $maxPage = intval(($CountNews - 1) / $MaxNewsOnPage) + 1;                    $MaxGoBack = $maxPage - $MaxListNumber;                    if ($pagen > ($maxPage - 1) || $pagen < 0) $pagen = 0;                    if (($pagen + 1) <= $MaxListNumber) {                        $start = 0;                        if ($MaxListNumber > $maxPage) $end = $maxPage;                        else $end = $MaxListNumber;                    } else {                        if ($pagen == ($maxPage - 1) || $pagen > $MaxGoBack) {                            $start = $maxPage - $MaxListNumber;                            $end = $maxPage;                        } else {                            $start = $pagen - (round($MaxListNumber / 2));                            $end = $MaxListNumber + $start;                        }                    }                    for ($j = $start; $j < $end; $j++) {                        if ($pagen == $j) $ListPage .= CMS::AdminModuleSection(55, "{n}", ($j + 1));                        else $ListPage .= CMS::AdminModuleSection(54, "{module},{id},{page},{n}", $_GET['name_tamlates'] . "<><>" . $_GET['id_cat'] . "<><>" . $j . "<><>" . ($j + 1));                    }                    if ($pagen != 0) $backN = CMS::AdminModuleSection('54-1', "{module},{page},{id}", $_GET['name_tamlates'] . "<><>" . ($pagen - 1) . "<><>" . $_GET['id_cat']);                    if (($maxPage - 1) != $pagen) $nexN = CMS::AdminModuleSection('54-2', "{module},{page},{id}", $_GET['name_tamlates'] . "<><>" . ($pagen + 1) . "<><>" . $_GET['id_cat']);                    echo CMS::AdminModuleSection(53, "{list},{next},{back}", $ListPage . "<><>" . $nexN . "<><>" . $backN);                    ###                }            } else echo CMS::AdminModuleSection(32, "{module}", $_GET['name_tamlates']);        } else echo CMS::AdminModuleSection(31, "{module}", $_GET['name_tamlates']);    }}echo CMS::AdminModuleSection(25, "", "");?>